{% extends "base.html" %}

{% block head_title %}
PostList
{% endblock %}

{% block main_area %}
<!-- Blog entries-->
    <h1 class="my-4">
        BLOG {% if category %} 
        <span class="badge badge-secondary">
            {{category}}
        </span>
        {% endif %}
       
        {% if tag %} 
        <span class="badge badge-secondary">
            <i class="bi bi-tags"></i>
            {{tag}}
            ({{tag.post_set.count}})
        </span>
        {% endif %}
    </h1>
    <!-- Blog post-->
    {% for p in post_list %}
    <div class="card mb-4" id="post-{{p.pk}}"> <!-- pk = 프라이머리키 -->
        {% if p.head_image %}
        <img class="card-img-top" src="{{p.head_image.url}}" alt="{{p}} head image" />
        {% else %}
        <img class="img-fluid rounded" src="http://placehold.it/900x250" alt="empty_image">
        {% endif %}
        <div class="card-body">
            <h2 class="card-title"><a href="{{p.get_absolute_url}}">{{p.title}}</a></h2>
            {% if p.hook_text %}
            <h5 class="text-muted">{{p.hook_text}}</h5>
            {% endif %}
            <p>{{p.content|truncatechars:100}}</p>
            
            {% if p.tags.exists %}
                <i class="bi bi-tags"></i>
                {% for tag in p.tags.iterator %}
                    <a href="{{tag.get_absolute_url}}">
                        <span class="badge badge-pill badge-lihgt">
                            {{tag}}
                        </span>
                    </a>
                {% endfor %}<br><br>
            {% endif %}

            <a class="btn btn-primary" href="{{p.get_absolute_url}}">Read More →</a>
        </div>
        <div class="card-footer text-muted">
            {{p.created_at}}
            <a href="#!">{{p.author|upper}}</a>
        </div>
    </div>
    {% endfor %}


    <!-- Pagination-->
    <ul class="pagination justify-content-center mb-4">
        <li class="page-item"><a class="page-link" href="#!">← Older</a></li>
        <li class="page-item disabled"><a class="page-link" href="#!">Newer →</a></li>
    </ul>

{% endblock %}